<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="/lib/revealjs/reveal.css" />
    <link rel="stylesheet" href="/lib/revealjs/theme/moon.css" />
    <link rel="stylesheet" href="/lib/revealjs/plugins/highlight/zenburn.css" />
    <link rel="stylesheet" href="/assets/styles/default.css" />

    <script src="/socket.io/socket.io.js" lang="javascript"></script>
    <script src="/lib/revealjs/reveal.js" lang="javascript"></script>
    <script src="/lib/revealjs/plugins/highlight/highlight.js" lang="javascript"></script>
    <script src="/lib/revealjs/plugins/markdown/markdown.js" lang="javascript"></script>
    <script src="/lib/revealjs/plugins/mermaid/mermaid.js" lang="javascript"></script>
    <script src="/lib/revealjs/plugins/notes/notes.js" lang="javascript"></script>
    <script src="/assets/scripts/index.js" lang="javascript"></script>

    <title>Intro to MongoDB</title>
</head>

<body>
    <div class="reveal">
        <div class="slides">
            <section>
                <div class="title-slide">
                    <div class="hero-image">
                        <img src="./assets/images/title.jpg">
                    </div>

                    <div class="title-content">
                        <h2>Intro to MongoDB</h2>
                        <h4 class="fragment fade-down">What I wish I knew 5 years ago</h4>

                        <p style="font-size: 0.5em">
                            Dave Fancher<br />
                            Lead Software Engineer<br />
                            Vibenomics, A Mood Media Company
                        </p>
                        <hr />
                        <p style="font-size: 0.5em; margin-bottom: 1.5em;">
                            Twitter: @davefancher<br />
                            LinkedIn: davefancher
                        </p>
                    </div>
                </div>

                <div style="font-size: 8pt; opacity: 25%;">Base cover image generated by Microsoft Bing search chat;
                    Edited in Affinity Photo 2</div>
            </section>

            <section>
                <h2>About this Presentation</h2>
                <ul>
                    <li class="fragment">My background</li>
                    <li class="fragment">Not intended to be comprehensive</li>
                    <li class="fragment">Discussion of useful MongoDB concepts</li>
                    <li class="fragment">Focusing on the database, not Atlas</li>
                    <li class="fragment">Sticking as close to <code class="javascript">mongosh</code> as possible</li>
                    <li class="fragment">Examples use the Sample Mflix Dataset provided by MongoDB unless otherwise stated</li>
                </ul>
            </section>

            <section>
                <section>
                    <h2>What is MongoDB?</h2>

                    <ul>
                        <li class="fragment">NoSQL database</li>
                        <li class="fragment">Broad support across most ecosystems</li>
                        <li class="fragment">
                            <span class="fragment strike semi-fade-out">Tables & Rows</span>
                            <span class="fragment fade-in">Collections & Documents</span>
                        </li>
                        <li class="fragment">
                            <span class="fragment strike semi-fade-out">Schemaless</span>
                            <span class="fragment fade-in">Flexible schema</span>
                        </li>
                        <li class="fragment">
                            <span class="fragment strike semi-fade-out">Non-relational</span>
                            <span class="fragment fade-in">All data is relational</span>
                        </li>
                    </ul>
                </section>

                <section>
                    <h3>NoSQL</h3>

                    <ul>
                        <li class="fragment">Doesn't use SQL</li>
                        <li class="fragment">MongoDB Query Language (MQL)</li>
                        <li class="fragment">JSON-like language</li>
                        <li class="fragment">Defines standard CRUD operations</li>
                        <li class="fragment">Defines schema manipulation operations</li>
                    </ul>
                </section>

                <section>
                    <h3>MQL Example - find</h3>

                    <pre>
                        <code class="javascript" data-trim data-noescape data-line-numbers="1-16|1|3-4|5-16|6|7-16">
                            use('sample_mflix');

                            db
                                .getCollection("movies")
                                .findOne(
                                    { title: /What we do in the shadows/i },
                                    {
                                        _id: 1,
                                        title: 1,
                                        rated: 1,
                                        languages: 1,
                                        directors: 1,
                                        cast: 1,
                                        genres: 1,
                                        imdb: 1,
                                    });
                        </code>
                    </pre>
                </section>

                <section>
                    <h3>Collections</h3>

                    <ul>
                        <li class="fragment">Collections ~= Tables</li>
                        <li class="fragment">Hold documents</li>
                        <li class="fragment">Can often be created automatically</li>
                        <li class="fragment">Indexable</li>
                        <li class="fragment">Validatable</li>
                    </ul>
                </section>

                <section>
                    <h3>Documents</h3>

                    <ul>
                        <li class="fragment">Documents are groups of key/value pairs</li>
                        <li class="fragment">Documents may be nested</li>
                        <li class="fragment">Highly compatible with objects</li>
                        <li class="fragment">BSON format</li>
                    </ul>
                </section>

                <section>
                    <h4>Document Example</h4>

                    <pre>
                        <code class="javascript" data-trim data-noescape data-line-numbers="1-19|2-4|5|6-8|9,11,12,13|14-18">
                            {
                                "_id": {
                                    "$oid": "573a13ebf29313caabdd043e"
                                },
                                "title": "What We Do in the Shadows",
                                "released": {
                                    "$date": "2015-02-13T00:00:00Z"
                                }
                                "genres": [ "Comedy", "Horror" ],
                                "rated": "R",
                                "cast": [ "Jemaine Clement", "Taika Waititi" /* , ... */ ],
                                "directors": [ "Jemaine Clement", "Taika Waititi" ],
                                "languages": [ "English", "German", "Spanish" ],
                                "imdb": {
                                    "rating": 7.6,
                                    "votes": 41029,
                                    "id": 3416742
                                }
                              }
                        </code>
                    </pre>
                </section>

                <section>
                    <h3>Flexible Schema</h3>

                    <ul>
                        <li class="fragment">Document structure matters</li>
                        <li class="fragment">...but can easily evolve as needs change</li>
                        <li class="fragment">Different and evolving structures may coexist</li>
                    </ul>
                </section>

                <section>
                    <h4>Flexible Schema Example</h4>

                    <pre>
                        <code class="javascript" data-trim data-noescape data-line-numbers>
                            [
                                {
                                    "_id": { "$oid": "573a13acf29313caabd289b3" },
                                    "title": "Anchorman: The Legend of Ron Burgundy",
                                    "year": 2004,
                                    "runtime": 94
                                },
                                {
                                    "_id": { "$oid": "573a13b1f29313caabd35ef4" },
                                    "title": "Talladega Nights: The Ballad of Ricky Bobby",
                                    "imdb_id": "tt0415306"
                                    "release_year": 2006
                                    "runtime_minutes": 108
                                  }
                            ]
                        </code>
                    </pre>
                </section>

                <section>
                    <h3>Relationships</h3>

                    <ul>
                        <li class="fragment">Embedded</li>
                        <li class="fragment">Reference</li>
                    </ul>
                </section>

                <section>
                    <h4>Relationship Example - Embedded</h4>

                    <div class="mermaid">
                        <pre>
                            %%{init: {'theme': 'default', 'themeVariables': { 'fontFamily': 'consolas' }}}%%
                            erDiagram
                                MOVIES {
                                    objectid _id PK
                                    string title
                                    array(string) cast
                                    array(string) directors
                                }
                        </pre>
                    </div>
                </section>

                <section>
                    <h4>Relationship Example - Reference</h4>

                    <div class="mermaid">
                        <pre>
                            %%{init: {'theme': 'default', 'themeVariables': { 'fontFamily': 'consolas' }}}%%
                            erDiagram
                                MOVIES ||--o{ COMMENTS : has
                                MOVIES {
                                    objectid _id PK
                                    string title
                                    int num_mflix_comments
                                }

                                COMMENTS {
                                    objectid _id PK
                                    objectid movie_id FK
                                    string name
                                    string email
                                    date date
                                    string text
                                }
                        </pre>
                    </div>
                </section>
            </section>

            <!--
                What is MongoDB?
                    "Developer Data Platform"
                    NoSQL
                    Flexible Schema
                    Collections
                        Schema validation
                    Document model
                        BSON
                Some "Special" Features
                    Sharding
                    Time Series Data
                    Transactions
                    Schema validation
                    Change Streams
                    Geospatial Queries
                    Atlas Search
                Language Availability
                    Native Drivers
                        Node.js
                        .NET
                        C++
                        Go
                        Java
                        Python
                        Rust
                        Ruby
                        ...
                Hosting
                    Self (Install or Docker)
                    Atlas
                1st Party Tools
                    Atlas
                    Compass
                    VS Code Extension
                Indexes
                Collation

                Querying Documents
                    FindOne
                    Find
                    Indexing
                    Collation
                Inserting Documents
                    InsertOne
                    InsertMany
                Updating Documents
                    UpdateOne
                    UpdateMany
                    Upserts
                    FindOneAndModify
                    ReplaceOne
                Deleting Documents
                    DeleteOne
                    DeleteMany
                    FindOneAndDelete
                Aggregation Pipelines
                    Common Stages
                        $match
                        $lookup
                        $unwind
                        $group
                        $sort
                        $project
                Data Modelling
                    Relationships
                        Embedded
                        References
                    Bucketing Pattern
                        Great for reducing the number of documents
                    Polymorphic Pattern
                        Great for versioning
                    Attribute Pattern
            -->
        </div>
    </div>
</body>

</html>